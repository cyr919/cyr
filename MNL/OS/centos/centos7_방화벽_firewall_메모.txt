
--------------------------------------------------------------------------------
방화벽 설정하기
--------------------------------------------------------------------------------


port설정은 위에서 설치할때 설정을 하긴 한 상태입니다. 혹시 등록이 되어 있지 않다면 gitlab.rb에서 설정 및 수정을 할 수 있습니다. (윗 내용 참조)

그리고 port는 gitlab에서만 설정했다고 되는 것은 아니고 시스템(CentOS)에서 실제로 해당 port를 방화벽에서 열어줘야 합니다.

----------------------------------------
시스템(CentOS) firewall 상태 확인
----------------------------------------
# 현재 firewall이 구동되고 있는지 죽어있는지 먼저 확인해봐야 합니다.
# 현재 실행 중이면 running, 실행 중이 아니면 not running을 출력합니다.

sudo firewall-cmd --state

----------------------------------------
시스템(CentOS) firewall 설치
----------------------------------------
# 간혹 시스템에 firewall이 설치되어 있지 않은 경우가 있습니다. 이때는 먼저 Firewall을 아래와 같이 설치 해 줘야 합니다.

#  설치 확인
sudo systemctl status firewalld

#  설치
sudo yum install firewalld
sudo systemctl enable firewalld
sudo systemctl start firewalld



----------------------------------------
port 추가하기
----------------------------------------

#만약 8001번 포트를 열어 주려면 아래와 같이 명령어를 실행하면 됩니다.
#firewall-cmd --permanent --add-port=8001/tcp

sudo firewall-cmd --permanent --add-port=9888/tcp


----------------------------------------
port 제거하기
----------------------------------------
#만약 8001번 포트를 제거하려면 아래와 같은 명령어를 실행하면 됩니다.
#firewall-cmd --permanent --add-remove=8001/tcp


----------------------------------------
서비스 추가하기(확인 필요)
----------------------------------------

- 방화벽 해제 및 재 실행
http, https에 대한 방화벽을 해제하고 다시 실행합니다.

sudo firewall-cmd --permanent --add-service=http
sudo firewall-cmd --permanent --add-service=https
sudo systemctl reload firewalld

방화벽이 설치되어 있지 않아 해당 명령어가 오류가 나는 경우가 있습니다.
아래 내용 중에 방화벽 설치에 대한 자세한 내용이 있으니 참고하세요.



----------------------------------------
port 설정 후 reload
----------------------------------------


sudo systemctl reload firewalld

----------------------------------------
현재 열려있는 포트 확인하기
----------------------------------------
# 사용 가능한 모든 서비스와 포트의 목록을 보여 줍니다. 등록한 8001/tcp이 목록에 있는지 확인 합니다.
sudo firewall-cmd --list-all


출처: https://uxgjs.tistory.com/161 [UX 공작소]

